/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/tus-js-client@1.8.0/test/spec/helpers/node/ajax.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var http=require("http"),url=require("url"),util=require("util"),httpAgent=require("_http_agent"),events=require("events");class MockAgent extends http.Agent{constructor(){super(),this._caughtRequests=[]}addRequest(e,t){this._caughtRequests.push(new MockRequest(e,t))}getLastRequest(){return this._caughtRequests[this._caughtRequests.length-1]}}class MockRequest{constructor(e,t){this._req=e,t.host=null,80==t.port&&(t.port=null),this.url=url.format(t),this.method=e.method,this.requestHeaders=t.headers,this.params={},this.params.size=t.headers["Content-Length"],void 0===t.headers["Content-Length"]&&(this.params.size=0,e.__originalWrite=e.write,e.write=(t=>{this.params.size+=t.length,e.__originalWrite(t)}))}respondWith(e){if(this._req.aborted)return;let t=new MockResponse;for(var s in t.statusCode=e.status,t.headers={},e.responseHeaders)t.headers[s.toLowerCase()]=e.responseHeaders[s];this._req.emit("response",t),"responseText"in e&&t.emit("data",Buffer.from(e.responseText,"utf8")),t.emit("end")}responseError(e){this._req.emit("error",e)}contentType(){return this.requestHeaders["Content-Type"]||""}toString(){return util.format("[MockRequest %s %s]",this.method,this.url)}}class MockResponse extends events.EventEmitter{}let agent=new MockAgent,originalAgent=httpAgent.globalAgent;class Ajax{install(){httpAgent.globalAgent=agent}uninstall(){httpAgent.globalAgent=originalAgent}}let ajax=new Ajax;ajax.requests={},ajax.requests.mostRecent=function(){return agent.getLastRequest()},jasmine.Ajax=ajax;
//# sourceMappingURL=/sm/278af84c20ac5732eceea2d9a889e9f2ce13666f47804a184e9759faa5b41e57.map